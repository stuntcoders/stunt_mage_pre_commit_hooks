#!/bin/bash

# Check for leftover debug code in JS files
FILES_PATTERN='\.(php|phtml)(\..+)?$'
FORBIDDENS=('var_dump' 'Zend_Debug')

for FORBIDDEN in ${FORBIDDENS[@]}; do
	git diff-index --cached --name-only HEAD | \
		grep -E $FILES_PATTERN | \
		GREP_COLOR='4;5;37;41' xargs grep --color --with-filename -n $FORBIDDEN && echo "Commit Rejected! Found ($FORBIDDEN) references. Please remove them before commiting" && exit 1
done
