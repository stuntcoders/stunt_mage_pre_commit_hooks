#!/bin/bash

# Check for leftover debug code in JS files
FILES_PATTERN='\.(php|phtml|js)(\..+)?$'
FORBIDDENS=('var_dump' 'Zend_Debug' 'console.log')

for FORBIDDEN in ${FORBIDDENS[@]}; do
	git diff-index --cached --name-only HEAD | \
	grep -E '\.(php|phtml|js)(\..+)?$' | \
	xargs grep --color --with-filename -n 'Zend_Debug' | \
	awk '{print "Debug call detected: " $1 " -- " $2}' && exit 1
done

exit 0
